# CT_task

Simple app, which takes data from http://hapi.fhir.org/ API and parse them into list. The app uses the [patients GET endpoint](http://hapi.fhir.org/baseR4/Patient?_format=json), to obtain the patient data. 

For state management the app uses the [flutter_bloc](https://bloclibrary.dev/#/) plugin. The UI is created based on the states invocated by events. Everything can be found in bloc_module. The parsing of the Json data is being done by autogenerated code from [json_serializable](https://pub.dev/packages/json_serializable) and [build_runner](https://pub.dev/packages/build_runner). Patient object is created by parsed data (id, name, birthDate, deceasedDateTime,  gender and full url to the patient at the API). The data are used to fill the list view with examinations for CT. The date and type of examination are generated randomly for each patient. Only the patients for today's day are visible. The search bar also works and patients can be found by id or name. If there is no internet, the list is empty or error occurred, the error page with appropriate message is shown and button to retry. 

## **Structure of the app:**

- **bloc_module**
  - bloc_module.dart - maps events and holds reference to client
  - bloc_observer.dart - prints the events and states to console
  - events.dart
  - states.dart
- **fhir** - api related files
  - **json_types**
    - json_patient.dart - json template classes
    - json_patient.g.dart - generated code for json parsing
  - **types**
    - examination.dart - object, with which the list view is filled
    - patient.dart - holds all the patien's data
  - api_client.dart - makes all the api calls and holds the data
  - filtration.dart - functions, which filter the patients by conditions
- **res**
  - images.dart - paths to images
  - strings.dart - all used strings
- **widgets**
  - **custom_widgets**
    - app_bar.dart
    - search_bar.dart
  - **exams**
    - exam_list.dart - creation of the list for all the examinations
    - exam_page.dart - merges the list, buttons and search bar 
    - exam_tab.dart - widget for examination 
  - error_page.dart - shows error and provides the button to retry
  - main_page.dart
- main.dart
- theme.dart - custom theme + other constants used across the project

## **Used resources:**

* stomach icon - [iconfinder.com by Chanut-is](https://www.iconfinder.com/icons/6549552/abdomen_constipation_digestive_gastrointestinal_intestine_stomach_icon)
* Nunito Sans font - [Google fonts](https://fonts.google.com/specimen/Nunito+Sans)

## **Used libraries:**

* [build_runner](https://pub.dev/packages/build_runner) - json code generation
* [connectivity plus](https://pub.dev/packages/connectivity_plus) - for internet connection status 
* [flutter_bloc](https://pub.dev/packages/flutter_bloc) - for state management of the app
* [flutter_lints](https://pub.dev/packages/flutter_lints) - opinionated code conventions
* [google_fonts](https://pub.dev/packages/google_fonts) - fonts themening
* [http](https://pub.dev/packages/http) - HTTP requests for the fhir API
* [intl](https://pub.dev/packages/intl) - for time formatting
* [json_serializable](https://pub.dev/packages/json_serializable) - json parsing
* [sprintf](https://pub.dev/packages/sprintf) - string formatting 

## **Screenshots:** 

<p align="center"><img src="images\loading.png" alt="loading" width="250" /></p>

<p align="center"><img src="images\list.jpg" alt="list" alt="loading" width="250" /></p>

<p align="center"><img src="images\empty_search.png" alt="empty_search" width="250" /></p>

<p align="center"><img src="images\no_internet.png" alt="no_internet" width="250" /></p>

<p align="center"><img src="images\error.png" alt="error" width="250" /></p>